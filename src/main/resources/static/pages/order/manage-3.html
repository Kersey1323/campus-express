<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="content-type" content="no-cache, must-revalidate"/>
    <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT"/>
    <title>Title</title>
<!--    <link rel="stylesheet" href="../../plugins/elementui/index.css">-->
    <link rel="stylesheet" href="../../plugins/lib-master/theme-chalk/index.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
<div id="app">

    <div class="content-header">
        <el-menu
                :default-active="activeIndex2"
                class="el-menu-demo"
                mode="horizontal"
                @select="handleSelect"
                background-color="#545c64"
                text-color="#fff"
                active-text-color="#ffd04b">
            <el-menu-item index="1"><a href="../user/index.html">首页</a></el-menu-item>
            <el-menu-item index="2"><a href="http://localhost:8080/pages/order/manage-1.html">寄快递</a></el-menu-item>
            <el-submenu index="3" :disabled="true">
                <template slot="title">校园平台</template>
                <el-menu-item index="3-1"><a href="#" style="color: white">平台中心</a></el-menu-item>
                <el-menu-item index="3-2"><a href="#" style="color: white">注册平台</a></el-menu-item>
                <el-menu-item index="3-3"><a href="#" style="color: white">平台管理</a></el-menu-item>
            </el-submenu>
            <el-menu-item index="4" v-if="!username"><a href="login.html" >登录</a></el-menu-item>
            <el-submenu index="4" v-if="username" >
                <template slot="title">{{username}}</template>
                <el-menu-item index="4-1" v-if="username"><a href="../order/manage-2.html" style="color: white"><i
                        class="el-icon-goods"></i> 我的快递</a></el-menu-item>
                <el-submenu index="4-2" v-if="username" >
                    <template slot="title"><i class="el-icon-s-order"></i> 订单派送</template>
                    <el-menu-item index="4-2-1"><a href="http://localhost:8080/pages/order/manage-3.html"
                                                   style="color: white"><i class="el-icon-s-home"></i> 派送中心</a></el-menu-item>
                    <el-menu-item index="4-2-2"><a href="http://localhost:8080/pages/order/manage-4.html"
                                                   style="color: white"><i class="el-icon-s-data"></i> 我的派送</a></el-menu-item></el-menu-item>

                </el-submenu>
                <el-menu-item index="4-3" v-if="username"><a href="../user/info.html" style="color: white"><i
                        class="el-icon-info"></i> 个人中心</a></el-menu-item>
                <el-menu-item index="4-4" v-if="username"><a href="http://localhost:8080/pages/order/index.html"
                                                             style="color: white"><i class="el-icon-circle-close"></i> 退出登录</a>
                </el-menu-item>
                </el-menu-item>

            </el-submenu>


        </el-menu>

    </div>

    <!--    导航栏-->
<!--    <div style="margin-left: 90%">-->

<!--        <el-row class="block-col-2">-->
<!--            <el-col :span="12">-->
<!--                <i class="el-icon-star-on" v-if="status=='1'"></i>-->
<!--                <el-dropdown>-->

<!--      <span class="el-dropdown-link">-->
<!--        {{username}}<i class="el-icon-arrow-down el-icon&#45;&#45;right"></i>-->
<!--      </span>-->
<!--                    <el-dropdown-menu slot="dropdown">-->
<!--                        <el-dropdown-item><i class="el-icon-info"></i><a href="../user/info.html"-->
<!--                                                                         style="margin-left: 10px;margin-bottom: 5px">个人中心</a>-->
<!--                        </el-dropdown-item>-->

<!--                        <el-dropdown-item v-if="status=='1'"><i class="el-icon-edit-outline">-->
<!--                        </i> <a href="../user/admin.html" style="margin-left: 8px;">管理页面</a>-->
<!--                        </el-dropdown-item>-->

<!--                        <el-dropdown-item><i class="el-icon-circle-close"></i> <a href="index.html"-->
<!--                                                                                  style="margin-left: 8px;">退出登陆</a>-->
<!--                        </el-dropdown-item>-->
<!--                    </el-dropdown-menu>-->
<!--                </el-dropdown>-->
<!--            </el-col>-->
<!--        </el-row>-->
<!--    </div>-->

    <!--    主体-->
    <div class="app-container">
        <el-container style="height: 800px; ">
<!--            <el-aside width="200px" style="background-color: rgb(238, 241, 246)">-->

<!--                <div style="background-color:rgb(255, 255, 255);margin-bottom: 0px" class="box"><i-->
<!--                        class="el-icon-s-order"><span>  </span></i></div>-->
<!--                <el-menu default-active="1-4-1" class="el-menu-vertical-demo"-->

<!--                >-->
<!--                    <el-submenu index="1">-->
<!--                        <template slot="title">-->
<!--                            <i class="el-icon-location"></i>-->
<!--                            <span slot="title">订单</span>-->
<!--                        </template>-->
<!--                        <el-menu-item-group>-->
<!--                            <span slot="title">订单</span>-->
<!--                            <el-menu-item index="1-1"><a href="manage-2.html">我的订单</a></el-menu-item>-->
<!--                            <el-menu-item index="1-2"><a href="manage-1.html">创建订单</a></el-menu-item>-->

<!--                            <el-submenu index="1-3" v-if="this.role=='1'">-->
<!--                                <template slot="title">订单派送</template>-->
<!--                                <el-menu-item index="1-3-1"><a href="manage-3.html">派送中心</a></el-menu-item>-->
<!--                                <el-menu-item index="1-3-2"><a href="manage-4.html">已接订单</a></el-menu-item>-->
<!--                            </el-submenu>-->

<!--                            <el-submenu index="1-4" v-if="this.role=='0'" disabled>-->
<!--                                <template slot="title">订单派送</template>-->
<!--                                <el-menu-item index="1-4-1">派送中心</el-menu-item>-->
<!--                                <el-menu-item index="1-4-2">订单</el-menu-item>-->
<!--                            </el-submenu>-->


<!--                        </el-menu-item-group>-->


<!--                    </el-submenu>-->
<!--                    <el-menu-item index="2">-->
<!--                        <i class="el-icon-back"><a href="../user/index.html" style="color: rgb(144, 147, 153)">|</a></i>-->
<!--                        <span slot="title">首页 </span>-->
<!--                    </el-menu-item>-->


<!--                    <el-menu-item index="4">-->
<!--                        <i class="el-icon-info"><a href="../user/info.html" style="color: rgb(144, 147, 153)"> |</a></i>-->
<!--                        <span slot="title">个人中心</span>-->
<!--                    </el-menu-item>-->
<!--                </el-menu>-->
<!--            </el-aside>-->
            <div class="box" style="border-top: 1px solid">


                <el-main style="background-color: white;height: 80%;">
                    <h2>派送中心</h2>
                    <div class="filter-container">
                        <el-input placeholder="订单号/手机号/姓名" style="width: 200px;" class="filter-item"
                                  v-model="searchData"></el-input>
                        <el-button class="dalfBut" @click="search()">查询</el-button>
                        <!--                        <el-button type="primary" class="butT" @click="handleSelectionPay()" v-if="status=='0'">批量支付-->
                        <!--                        </el-button>-->
                        <!--                        <el-button type="danger" class="butT" @click="handleSelectionDelete()">批量删除</el-button>-->
                        <!--                        <span style="font-size: large;color: red;margin-left: 10px">合计:{{totalPrice}}元</span>-->
                    </div>

                    <!--                    所有订单-->
                    <el-table size="mini" current-row-key="id" :data="dataList" v-if="status=='1'" stripe
                              highlight-current-row @selection-change="handleSelectionChange" ref="multipleTable">

                        <el-table-column
                                type="selection"
                                width="55">
                        </el-table-column>
                        <el-table-column prop="orderId" align="center" label="订单号"></el-table-column>
                        <el-table-column prop="sendName" label="寄件人" align="center"></el-table-column>
                        <el-table-column prop="sendTel" label="电话" align="center"></el-table-column>
                        <el-table-column prop="recName" label="收件人" align="center"></el-table-column>
                        <el-table-column prop="recTel" label="收件人电话" align="center"></el-table-column>
                        <el-table-column prop="sendAddress" label="寄件地址" align="center"></el-table-column>
                        <el-table-column prop="recAddress" label="收件地址" align="center"></el-table-column>
                        <el-table-column prop="price" label="价格" align="center"></el-table-column>
                        <el-table-column prop="" label="操作" align="center">

                            <template slot-scope="scope">
                                <!--                                <el-button @click="handleUpdate(scope.row)" type="primary" size="mini"-->
                                <!--                                           v-if="status=='1'">编辑-->
                                <!--                                </el-button>-->
                                <el-button @click="handleUpdate(scope.row)" type="primary" size="mini">编辑</el-button>
                                <el-button @click="handleDelete(scope.row)" size="mini" type="danger">删除</el-button>
                            </template>

                        </el-table-column>
                    </el-table>


                    <!--                    用户订单-->
                    <el-table size="mini" current-row-key="id" :data="dataList" v-if="status=='0'" stripe
                              highlight-current-row @selection-change="handleSelectionChange" ref="multipleTable">
                        <el-table-column
                                type="selection"
                                width="55">
                        </el-table-column>

                        <el-table-column prop="orderId" align="center" label="订单号">
                            <template slot-scope="scope">{{ scope.row.orderId }}</template>
                        </el-table-column>

                        <el-table-column prop="sendName" label="寄件人" align="center"></el-table-column>
                        <el-table-column prop="sendTel" label="电话" align="center"></el-table-column>
                        <el-table-column prop="recName" label="收件人" align="center"></el-table-column>
                        <el-table-column prop="recTel" label="收件人电话" align="center"></el-table-column>
                        <el-table-column prop="sendAddress" label="寄件地址" align="center"></el-table-column>
                        <el-table-column prop="recAddress" label="收件地址" align="center"></el-table-column>
                        <el-table-column prop="price" label="价格" align="center"></el-table-column>
                        <el-table-column prop="" label="操作" align="center">

                            <template slot-scope="scope">
                                <!--                                <el-button @click="handleUpdate(scope.row)" type="primary" size="mini"-->
                                <!--                                           v-if="status=='1'">编辑-->
                                <!--                                </el-button>-->
                                <el-button @click="handleReceive(scope.row)" type="primary" size="mini"
                                           v-if="scope.row.isPay==1&&scope.row.isReceived==0">接单
                                </el-button>
                                <el-button @click="handleDelivery(scope.row)" type="success" size="mini"
                                           v-if="scope.row.isPay==1&&scope.row.isReceived==1&&scope.row.isFinish==1"
                                           disabled>已完成
                                </el-button>

                                <el-button @click="handleFinish(scope.row)" type="primary" size="mini"
                                           v-if="scope.row.isReceived==1&&scope.row.isFinish==0">派送中
                                </el-button>

                                <el-button @click="handleFeedBack(scope.row)" type="primary" size="mini"
                                           v-if="scope.row.isReceived==1&&scope.row.isFinish==1">反馈
                                </el-button>

                            </template>

                        </el-table-column>
                    </el-table>


                    <!--分页工具-->
                    <el-pagination
                            class="pagiantion"

                            @current-change="handleCurrentChange"
                            :page-sizes="[5,10,15,20]"
                            :current-page="pagination.currentPage"
                            :page-size="pagination.pageSize"
                            layout="total, prev, pager, next, jumper"
                            :total="pagination.total">
                    </el-pagination>
                </el-main>
            </div>

        </el-container>


        <!-- 接单标签弹层 -->
        <div class="add-form">
            <el-dialog title="订单信息" :visible.sync="dialogFormVisible4Receive">
                <el-form ref="dataAddForm" :model="formData" label-position="right"
                         label-width="100px">
                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="订单号" prop="orderId">
                                <el-input v-model="formData.orderId" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="寄件人" prop="sendName">
                                <el-input v-model="formData.sendName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="电话" prop="sendTel">
                                <el-input v-model="formData.sendTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人" prop="recName">
                                <el-input v-model="formData.recName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人电话" prop="recTel">
                                <el-input v-model="formData.recTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件地址" prop="recAddress">
                                <el-input v-model="formData.recAddress" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="下单时间" prop="createTime">
                                <el-input v-model="formData.createTime" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="24">
                            <el-form-item label="备注" prop="message">
                                <el-input v-model="formData.message" type="textarea" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row >
                        <el-col :span="12">
                            <el-form-item label="派送地址" prop="address2Receive">
                                <el-input v-model="formData.address2Receive" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>

                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible4Receive = false">取消</el-button>
                    <el-button type="primary" @click="receive()">确定</el-button>
                </div>
            </el-dialog>
        </div>

        <!-- 完成标签弹层 -->
        <div class="add-form">
            <el-dialog title="订单信息" :visible.sync="dialogFormVisible4Finish">
                <el-form ref="dataAddForm" :model="formData" label-position="right"
                         label-width="100px">
                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="订单号" prop="orderId">
                                <el-input v-model="formData.orderId" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="寄件人" prop="sendName">
                                <el-input v-model="formData.sendName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="电话" prop="sendTel">
                                <el-input v-model="formData.sendTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人" prop="recName">
                                <el-input v-model="formData.recName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人电话" prop="recTel">
                                <el-input v-model="formData.recTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件地址" prop="recAddress">
                                <el-input v-model="formData.recAddress" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="下单时间" prop="createTime">
                                <el-input v-model="formData.createTime" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="24">
                            <el-form-item label="备注" prop="message">
                                <el-input v-model="formData.message" type="textarea" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>

                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible4Finish = false">取消</el-button>
                    <el-button type="primary" @click="finish()">订单完成</el-button>
                </div>
            </el-dialog>
        </div>

        <!-- 代取标签弹层 -->
        <div class="add-form">
            <el-dialog title="订单信息" :visible.sync="dialogFormVisible4Del">
                <el-form ref="dataAddForm" :model="formData" label-position="right"
                         label-width="100px">
                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="订单号" prop="orderId">
                                <el-input v-model="formData.orderId" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="寄件人" prop="sendName">
                                <el-input v-model="formData.sendName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="电话" prop="sendTel">
                                <el-input v-model="formData.sendTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人" prop="recName">
                                <el-input v-model="formData.recName" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件人电话" prop="recTel">
                                <el-input v-model="formData.recTel" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="收件地址" prop="recAddress">
                                <el-input v-model="formData.recAddress" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row>
                        <el-col :span="12">
                            <el-form-item label="下单时间" prop="createTime">
                                <el-input v-model="formData.createTime" :disabled="true"/>
                            </el-form-item>
                        </el-col>
                    </el-row>


                    <el-row>
                        <el-col :span="24">
                            <el-form-item label="备注" prop="message">
                                <el-input v-model="formData.message" type="textarea" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row v-if="formData.isPay=='1'">
                        <el-col :span="24">
                            <el-form-item label="订单状态" prop="isPay">
                                <el-input value="已支付" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>

                    <el-row v-if="formData.isPay=='0'">
                        <el-col :span="24">
                            <el-form-item label="订单状态" prop="isPay">
                                <el-input value="未支付" :disabled="true"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-row>
                    <p></p>
                    <span>价格：{{formData.price}}</span>
                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible4Del = false">取消</el-button>

                    <el-button type="primary" @click="delivery()">代取下单</el-button>
                </div>
            </el-dialog>
        </div>

        <!-- 反馈标签弹层 -->
        <div class="add-form">
            <el-dialog title="订单反馈" :visible.sync="dialogFormVisible4FeedBack">
                <el-form ref="dataAddForm"  label-position="right"
                         label-width="100px">

                    <el-form-item label="反馈：" >
                        <el-input v-model="feedBack" type="textarea" ></el-input>
                    </el-form-item>

                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible4FeedBack = false">取消</el-button>

                    <el-button type="primary" @click="feedBack()">提交</el-button>
                </div>
            </el-dialog>
        </div>
    </div>
</div>

</body>
<style>

    .el-dropdown-link {
        cursor: pointer;
        color: #409EFF;
    }

    .el-icon-arrow-down {
        font-size: 12px;
    }

    .demonstration {
        display: block;
        color: #8492a6;
        font-size: 14px;
        margin-bottom: 20px;
    }

</style>
<!-- 引入组件库 -->
<script src="../../js/vue.js"></script>
<!--<script src="../../plugins/elementui/index.js"></script>-->
<script src="../../plugins/lib-master/index.js" charset="UTF-8"></script>
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script src="../../js/axios-0.18.0.js"></script>

<script>
    var vue = new Vue({

        el: '#app',

        data: {
            username: '',
            status: '0',
            role: '0',
            isPay: '0',
            id: '0',
            ids: [],
            orderId:'',
            totalPrice: '',
            feedBack:'',
            dataList: [],//当前页要展示的分页列表数据
            UserDataList: [],//用户订单信息
            formData: {},//表单数据
            searchData: '',//查询数据
            dialogFormVisible: false,//增加表单是否可见
            dialogFormVisible4Receive: false,//编辑表单是否可见
            dialogFormVisible4Finish: false,//支付表单是否可见
            dialogFormVisible4Del: false,//派送表单是否可见
            pagination: {
                //初始页面信息
                total: 100,
                currentPage: 1,
                pageSize: 10
            },
            multipleSelection: [],//多选框
            isCollapse: true,


            form: {
                orderId: '',
                userId: '',
                currierId: '',

            },
        },

        //钩子函数，VUE对象初始化完成后自动执行
        mounted() {

            this.getUser();
            this.selectByPage();


        },

        methods: {
            // 重置表单
            resetForm() {
                //清空输入框
                this.formData = {};
            },

            //分页查询(所有订单查询)
            selectByPage() {

                axios.get("/delOrders/" + this.pagination.currentPage + "/" + this.pagination.pageSize).then(res => {
                    this.pagination.total = res.data.data.totalCount;
                    this.dataList = res.data.data.rows;
                    console.log(res.data.data.rows);

                })

            },

            //条件查询
            search() {
                axios.get("/delOrders/underReceive/"+ this.searchData)
                    .then(res => {
                        if (res.data.data)
                            this.dataList = res.data.data.rows;
                        else
                           this.$message.error("查询失败，请联系管理员！");
                        this.pagination.total = res.data.data.totalCount;

                    })

            },

            getUser() {

                this.username = sessionStorage.getItem("username");
                this.status = sessionStorage.getItem("status");
                this.id = sessionStorage.getItem("id");
                this.role = sessionStorage.getItem("role");
            },


            //获取订单的信息
            handleReceive(row) {
                this.resetForm();
                axios.get("/orders/" + row.orderId).then((res) => {
                    this.dialogFormVisible4Receive = true;
                    this.formData = res.data.data;


                    this.form.orderId=this.formData.orderId;
                    this.form.userId=this.formData.userId;
                    this.form.currierId=this.id;

                    console.log(this.formData);
                })


            },


            //接单
            async receive() {
                try {
                    await this.$confirm("确定接单？", "提示", {
                        type: 'info'
                    });
                    const [t, res] = await Promise.all([
                        axios.post("/delOrders/receive/"+this.id,this.form ),
                        axios.put("/delOrders/" + this.formData.orderId)
                    ]);

                    if (res.data.code == 20031&& t.data.code == 20011) {
                        const r = await axios.put("/users/pay/" + this.id);

                        if (r.data.code == 20031) {
                            this.$message.success("接单成功");
                        }
                    } else {
                        this.$message.error("接单失败");
                    }
                    this.dialogFormVisible4Receive = false;
                    this.pagination.currentPage = 1;
                    this.selectByPage();


                } catch (error) {
                    console.log(error);
                    this.$message.info("取消接单");
                }

            },


            //获取订单的信息
            handleFinish(row) {
                this.resetForm();
                axios.get("/orders/" + row.orderId).then((res) => {
                    this.dialogFormVisible4Finish = true;
                    this.formData = res.data.data;

                })


            },

            //订单完成
            finish() {
                this.$confirm("是否完成订单？", "提示", {
                    type: 'info'
                }).then(() => {
                    //    删除业务
                    axios.put("/delOrders/finish/" + this.formData.orderId).then((res) => {
                        if (res.data.code == 20031) {
                            this.$message.success("订单成功");
                            this.pagination.currentPage = 1;
                            this.dialogFormVisible4Finish = false;
                        }
                        //    失败
                        else {
                            this.$message.error("完成失败,请联系管理员。");
                        }
                    }).finally(() => {

                        this.selectByPage();
                    })

                }).catch(() => {

                    this.$message.info("取消删除");
                })
            },



            handleFeedBack(row){
                this.dialogFormVisible4FeedBack=true;
                this.orderId=row.orderId;

            },

            feedback(){
            axios.post("/delOrders/"+this.orderId,this.feedBack).then((res=>{

                if (res.data.code==20011){
                    this.$message.success("反馈成功！");
                }else{

                    this.$message.error("反馈失败！请联系管理员");
                }
            }));
                this.dialogFormVisible4FeedBack=false;
            },

            //页面大小
            // handleSizeChange(val) {
            //     this.pagination.pagesize = val;
            //
            // },

            //当前页面设置
            handleCurrentChange(val) {
                this.pagination.currentPage = val;
                if (this.status == '1')
                    this.selectByPage();
                else if (this.status == '0')
                    this.getUserOrder();
            },

            //多选
            handleSelectionChange(val) {
                this.multipleSelection = val;
                console.log(this.multipleSelection);

                //计算总价
                let sum = 0;
                for (let i = 0; i < this.multipleSelection.length; i++) {
                    if (this.multipleSelection[i].isPay == '0')
                        sum += this.multipleSelection[i].price;
                }
                this.totalPrice = sum.toFixed(2);
            },


        },

    })
</script>
</html>
</html>