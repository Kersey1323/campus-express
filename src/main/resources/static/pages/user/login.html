<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="content-type" content="no-cache, must-revalidate" />
    <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT"/>
    <title>login</title>
    <!-- 引入样式 -->
    <link href="../../css/login.css" rel="stylesheet">
<!--    <link rel="stylesheet" href="../../plugins/elementui/index.css">-->
    <link rel="stylesheet" href="../../plugins/lib-master/theme-chalk/index.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body class="hold-transition">
<div id="loginDiv" style="height: 350px">
    <img src="../../imgs/logo-2.png" width="300px" height="200px" style="margin-bottom: 100px">
    <div id="app">


        <el-form label-width="70px" label-position="right" label-color="white" :model="loginData" style="float: left">

            <h1 align="center" style="color: whitesmoke;margin-bottom: 10px;margin-left: 30px">LOGIN IN</h1>


            <el-form-item label="用户名">
                <el-input placeholder="账号或邮箱" v-model="loginData.username" prop="username" type="text"
                          size="small"></el-input>
            </el-form-item>

            <el-form-item label="密码">
                <el-input placeholder="请输入密码" v-model="loginData.password" prop="password" type="password" size="small"
                          show-password></el-input>
            </el-form-item>

            <el-form-item>
                <el-button type="primary" @click="login()" size="small">登陆</el-button>
                <el-button @click="resetForm" size="small">重置</el-button>
            </el-form-item>

            <p style="float: left">记住我:<input name="remember" value="1" type="checkbox"></p>

            <a href="http://localhost:8080/pages/user/register.html"><p align="right" style="float: left">没有账号？点击注册</p></a>
        </el-form>
    </div>
</div>

</body>


<script src="../../js/vue.js"></script>
<script src="../../js/axios-0.18.0.js"></script>
<!--<script src="../../plugins/elementui/index.js"></script>-->
<script src="../../plugins/lib-master/index.js" charset="UTF-8"></script>
<script type="text/javascript" src="../../js/jquery.min.js"></script>


<script>

    var vue = new Vue({
        el: '#app',

        data: {

            loginData: {
                username: "",
                password: ""

            },


        },

        methods: {

            login() {
                var _this = this;

                axios({
                    method: "get",
                    url: "http://localhost:8080/users/" + _this.loginData.username + "/" + _this.loginData.password,

                }).then(function (response) {
                    console.log(response.data.data);
                    if (response.data.data) {
                        if(response.data.data.status=='1'){
                            setTimeout("",3000);
                            location.href = "http://localhost:8080/pages/user/admin.html";
                        }else {
                            setTimeout("",3000);
                            location.href = "http://localhost:8080/pages/user/index.html";
                        }

                    } else {
                        _this.$message.error("用户名或密码错误!");
                        _this.resetForm();

                    }

                })


                // then((res=>{
                //     if(res.data.data){
                //         console.log(res.data.data);
                //         location.href="index.html";
                //     }else {
                //         this.$message.error("用户名或密码错误!");
                //         this.resetForm();
                //
                //     }
                //
                //
                // }))


            },

            resetForm() {

                this.loginData = {}
            }


        }


    })

</script>
</html>